-- Deploy: migrate/meta to pg
-- made with <3 @ launchql.com



BEGIN;
SET session_replication_role TO replica;
-- using replica in case we are deploying triggers to collections_public

-- unaccent, postgis affected and require grants
GRANT EXECUTE ON ALL FUNCTIONS IN SCHEMA public to public;

DO $LQLMIGRATION$
  DECLARE
  BEGIN
  
    EXECUTE format('GRANT CONNECT ON DATABASE %I TO %I', current_database(), 'app_user');
    EXECUTE format('GRANT CONNECT ON DATABASE %I TO %I', current_database(), 'app_admin');

  END;
$LQLMIGRATION$;



INSERT INTO collections_public.database ( id, owner_id, name, hash ) VALUES ('455a6e2c-3778-55f9-aca2-65ffa9b4a47c', NULL, 'dashboard', '30db3dc4-efba-519e-9567-1eed03ff3d98');

INSERT INTO collections_public.schema ( id, database_id, name, schema_name, description ) VALUES ('079311ee-04cf-4158-818b-a17769d32de4', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'public', 'dashboard_public', NULL), ('0793b4f3-feae-4fea-ccfb-0262b19e72fa', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'private', 'dashboard_private', NULL), ('07939258-b12b-444b-abc0-d2c97ef30b2f', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'memberships_public', 'dashboard_memberships_public', NULL), ('0793bef8-cdb0-4dd4-239d-263f6c1a24d2', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'permissions_public', 'dashboard_permissions_public', NULL), ('07939ae3-16a4-41c4-3ade-bb3424a9bae4', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'permissions_private', 'dashboard_permissions_private', NULL), ('07934d87-ba09-4993-b4e3-af9d4bf3dbb8', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'limits_public', 'dashboard_limits_public', NULL), ('07931ed9-b337-42f4-73eb-08d0b8ca73f6', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'limits_private', 'dashboard_limits_private', NULL), ('0793661c-5ead-4553-219f-de230320278c', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'memberships_private', 'dashboard_memberships_private', NULL), ('0793a6c9-04ab-4db5-cc9e-2a19a4e98929', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'status_public', 'dashboard_status_public', NULL), ('07931fc7-1311-4b0c-9724-4f487f1ab626', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'status_private', 'dashboard_status_private', NULL), ('0793b03e-1e71-4e95-e3fa-ee07e785a23b', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'simple_secrets', 'dashboard_simple_secrets', NULL), ('0793c751-30bd-4c2e-c688-ca7e191849f1', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'roles_private', 'dashboard_roles_private', NULL), ('07930404-95f6-45af-f402-95eb8249c985', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'encrypted', 'dashboard_encrypted', NULL), ('07938ad9-451a-4325-1963-b26cdbfdd4aa', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'roles_public', 'dashboard_roles_public', NULL), ('07938361-a636-4a12-342d-e8a72f102d1c', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'invites_public', 'dashboard_invites_public', NULL), ('079309ad-cc89-4e7a-3b48-70f291af10d3', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'invites_private', 'dashboard_invites_private', NULL);

INSERT INTO collections_public."table" ( id, database_id, schema_id, name, description ) VALUES ('0793ae10-826e-4a0c-6a42-74c0e78f9688', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'role_types', NULL), ('0793336c-f2b6-429b-4d8f-336a6d7e6e05', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'users', NULL), ('07931841-c93b-4c9c-9bb7-34af452c5c91', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'membership_types', NULL), ('0793035a-3f25-429c-e3c5-a1aea5460398', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793661c-5ead-4553-219f-de230320278c', 'app_memberships_acl', NULL), ('07939b63-54fa-47d9-71dd-62a4900951c1', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793661c-5ead-4553-219f-de230320278c', 'memberships_acl', NULL), ('0793e5af-201e-46f8-bd98-7569fc81e53f', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793661c-5ead-4553-219f-de230320278c', 'group_memberships_acl', NULL), ('07932f76-55c3-4d36-f015-710a116a3d4b', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793b03e-1e71-4e95-e3fa-ee07e785a23b', 'user_secrets', NULL), ('07935648-53eb-4785-82ac-928b6b228acc', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793c751-30bd-4c2e-c688-ca7e191849f1', 'api_tokens', NULL), ('0793d96a-21a2-4947-4894-d8412b086ebc', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07930404-95f6-45af-f402-95eb8249c985', 'user_encrypted_secrets', NULL), ('0793cfa6-9d1c-4cca-385b-0764a59959e1', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'connected_accounts', NULL), ('079336e9-e40b-45c1-7ce7-96dbee7f966c', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'emails', NULL), ('07939268-297a-4eee-2477-4ac2555ef8d1', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'phone_numbers', NULL), ('0793cb3e-1f7a-4544-6f66-6ee51f002d2a', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'crypto_addresses', NULL), ('0793590d-74f3-40d9-22e6-362d2ac09d14', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07938361-a636-4a12-342d-e8a72f102d1c', 'invites', NULL), ('0793ba87-c9a0-4f37-755d-14068e153f3c', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07938361-a636-4a12-342d-e8a72f102d1c', 'claimed_invites', NULL), ('079394d8-b77b-43c0-dde0-d9f5ee919526', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07938361-a636-4a12-342d-e8a72f102d1c', 'member_invites', NULL), ('079396a5-01c4-4f0f-7d8f-db904a0f485e', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07938361-a636-4a12-342d-e8a72f102d1c', 'member_claimed_invites', NULL), ('0793b454-0dee-4634-23cd-d7cfc269bc38', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07938361-a636-4a12-342d-e8a72f102d1c', 'group_invites', NULL), ('0793a198-1d47-4ea1-8874-e08e20f428eb', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07938361-a636-4a12-342d-e8a72f102d1c', 'group_claimed_invites', NULL), ('0793e2df-76f6-4045-d869-b73cff2ab995', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793bef8-cdb0-4dd4-239d-263f6c1a24d2', 'app_permissions', NULL), ('0793dfd2-2eb3-4998-391c-caa6bf6c7742', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793bef8-cdb0-4dd4-239d-263f6c1a24d2', 'app_permission_defaults', NULL), ('079325b3-9427-4209-2d49-643847742516', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07934d87-ba09-4993-b4e3-af9d4bf3dbb8', 'app_limits', NULL), ('0793e7e7-1be9-47e6-5dc7-63eb9995b1dc', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07934d87-ba09-4993-b4e3-af9d4bf3dbb8', 'app_limit_defaults', NULL), ('07938eea-025f-4be6-dcc5-d652172fb4a4', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'app_memberships', NULL), ('0793365b-490f-4c8b-1f2e-0aefc1cb2d31', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'app_membership_defaults', NULL), ('07936f65-30ca-4e2b-f051-85f9fe56d5ef', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'app_grants', NULL), ('0793ef3c-6d21-4a6f-70bf-f70d4ca3fdae', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'app_admin_grants', NULL), ('0793d66c-d1e9-464b-a524-428854c79905', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'app_owner_grants', NULL), ('0793fd2f-2270-4e95-7494-978b64b27f02', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793a6c9-04ab-4db5-cc9e-2a19a4e98929', 'app_steps', 'The user achieving a requirement for a level. Log table that has every single step ever taken.'), ('07935d68-b6c5-499a-c987-9a9d76067510', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793a6c9-04ab-4db5-cc9e-2a19a4e98929', 'app_achievements', 'This table represents the users progress for particular level requirements, tallying the total count. This table is updated via triggers and should not be updated maually.'), ('07937d12-6da7-4694-dee6-07e2a38e5947', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793a6c9-04ab-4db5-cc9e-2a19a4e98929', 'app_levels', 'Levels for achievement'), ('07939523-0420-4ef7-e755-d7fb060fe6f8', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793a6c9-04ab-4db5-cc9e-2a19a4e98929', 'app_level_requirements', 'Requirements to achieve a level'), ('0793f2cf-ccf8-4bdc-c4db-768c711cfeb5', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793bef8-cdb0-4dd4-239d-263f6c1a24d2', 'membership_permissions', NULL), ('0793fa98-5e37-4dc8-6478-b8beb994ab52', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793bef8-cdb0-4dd4-239d-263f6c1a24d2', 'membership_permission_defaults', NULL), ('07934c68-4ae1-405b-c709-ea0b358d1460', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07934d87-ba09-4993-b4e3-af9d4bf3dbb8', 'membership_limits', NULL), ('079327b7-aaa2-474a-be47-18e21dbdd71d', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07934d87-ba09-4993-b4e3-af9d4bf3dbb8', 'membership_limit_defaults', NULL), ('07930a92-a134-493b-0639-b149da74b061', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'members', NULL), ('07933591-676a-4031-a2f5-0f5d1f6d4584', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'memberships', NULL), ('07935ee3-d972-42ba-896e-68c07de1211b', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'membership_defaults', NULL), ('079382d3-0eab-4f5c-1d0d-7df80d7368bb', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'grants', NULL), ('07933a1f-7b82-4f48-1f31-ce9655844ddb', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'admin_grants', NULL), ('0793848d-2053-4e53-0c5b-5615ffa16a29', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'owner_grants', NULL), ('07935699-c7b6-48be-b4ae-a900ee72a1dd', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'groups', NULL), ('079325ff-48d4-4e22-f752-2e027f1c2c8f', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793bef8-cdb0-4dd4-239d-263f6c1a24d2', 'group_member_permissions', NULL), ('0793400b-cbe2-4e7c-3e09-9029432ca53c', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793bef8-cdb0-4dd4-239d-263f6c1a24d2', 'group_member_permission_defaults', NULL), ('0793a555-13b2-49a2-fd55-b91ff889f374', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07934d87-ba09-4993-b4e3-af9d4bf3dbb8', 'group_member_limits', NULL), ('0793ffe8-a6b2-41d5-0baa-2fbbf829c728', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07934d87-ba09-4993-b4e3-af9d4bf3dbb8', 'group_member_limit_defaults', NULL), ('0793253b-b3e0-4ca2-acca-31c7245b471d', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'group_members', NULL), ('07936428-b471-4092-e16c-0b85c771e1dc', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'group_memberships', NULL), ('079356da-7a61-4b5a-b478-c5fdc7db77c1', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'group_membership_defaults', NULL), ('0793ec74-8246-423b-1163-4f4168a06f44', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'group_grants', NULL), ('0793531f-7f2e-4b1b-b0ed-295d772b07c8', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'group_admin_grants', NULL), ('0793b6be-9143-4b22-115c-066dc4b96614', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'group_owner_grants', NULL), ('0793c03d-dcf8-4d3b-3b40-b78841a94aca', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07938ad9-451a-4325-1963-b26cdbfdd4aa', 'audit_logs', NULL), ('07936fa8-27e0-44f1-7cc1-049dc37d8f71', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07938ad9-451a-4325-1963-b26cdbfdd4aa', 'auth_accounts', NULL), ('0793ec74-b5dc-422c-1ac4-6917fb96195c', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_profiles', NULL), ('07938dfb-3494-466b-ef43-ad9774c41b56', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_settings', NULL), ('079349af-d7ac-40fc-bf1d-5f6ad6d796a8', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_characteristics', NULL), ('07931bef-67bd-46bf-9f6d-dec7893da894', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_contacts', NULL), ('0793d09a-1cce-462a-d3f1-c095e9119b5e', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_connections', NULL), ('0793252b-364e-4deb-f1be-f6686259cdfb', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'location_types', NULL), ('07933fa2-988e-40b5-7d2c-ba00aa22ba51', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'locations', NULL), ('07937b10-c67a-4e2d-8478-655752e77554', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_locations', NULL), ('079352f8-2825-4bf4-1523-5123840185aa', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'news_articles', NULL), ('07934a8c-16ce-4ee0-0abe-dac399e021ea', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'quantities', NULL), ('07930f46-ba59-4d87-11ad-62c90cfeb6e8', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'units', NULL), ('079348f7-2e6e-432f-ad45-bf8a6989f725', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'object_types', NULL), ('0793943e-6aba-4c6a-1fa3-73ac5d6b0a72', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'objects', NULL), ('07934b86-4a37-471e-55ea-acf8c4e2e47a', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'object_type_attributes', NULL), ('0793ef1d-43c3-44c3-5bdc-d95795154a39', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'object_type_values', NULL), ('0793288a-aec5-422d-6dde-df6000ece97e', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'object_attributes', NULL), ('07933c0d-f3f9-4e69-2690-0d60921bc609', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'object_records', NULL), ('0793539f-ec61-469b-8720-4dd13256b7cb', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'impacts', NULL), ('0793965b-8c72-441f-2051-3fb92ef71982', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'impacts_conditions', NULL), ('079337e3-47ef-4bf7-ddfa-d147df4ec28e', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'goals', NULL), ('0793b005-98a1-4a19-e2df-34a5af0e59fc', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'goal_explanations', NULL), ('0793a457-99e4-4bd8-a2e6-b63e9fec446e', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'actions', NULL), ('079374e3-ebc2-452c-4e8a-c386e9094a2d', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'action_goals', NULL), ('0793a760-1389-401b-1621-b56deb690f5d', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'action_variations', NULL), ('0793afa6-1fed-4c71-e59f-8cba46818cde', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'action_item_types', NULL), ('0793563e-6a50-4fd2-dc0c-1ba225201401', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'action_items', NULL), ('0793cbbc-518e-47a3-1a59-08d7a2958be0', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'related_actions', NULL), ('0793e3eb-aa3c-404e-1a07-7c347c35eafb', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'action_locations', NULL), ('0793521a-5459-48c6-50cd-992412e20dc3', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_actions', NULL), ('07930b4e-d132-498c-9a33-fe97c93c6ee7', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_action_verifications', NULL), ('0793cc6c-0518-4397-d56a-238dae6645f1', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_action_items', NULL), ('079329dc-2f14-491f-b80b-7ed7094aba88', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_action_item_verifications', NULL), ('07931c74-09e5-4e46-97cf-cb7449568b3b', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'tracks', NULL), ('0793a7a1-5354-4cc1-6dfd-6e988ed6c363', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'track_actions', NULL), ('0793b04c-17b5-45b1-c716-1384568346f2', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_tracks', NULL), ('079355c4-74cc-433d-d20e-5a9cb4514d11', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'action_impacts', NULL), ('07930811-be63-4691-7650-f8286f412c8e', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'zip_codes', NULL), ('079371b7-a58d-453f-0cb5-63431c0b321a', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'organization_profiles', NULL), ('07930db7-a347-4fe3-2226-b50f474de0f0', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_pass_actions', NULL), ('07936f33-5811-43f1-38ef-b2461206d778', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_saved_actions', NULL), ('0793a88c-9394-46e9-4069-995014b1157b', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_viewed_actions', NULL), ('0793b277-1817-44e2-9cfe-625a7a65dd4f', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_action_reactions', NULL), ('0793146b-e65d-4a6a-0d3d-75ab511886fc', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_messages', NULL), ('079345e5-c6e0-4bfe-86b6-164659ae77bc', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'message_groups', NULL), ('07937f4c-ee15-4674-9fb2-35c6e9597c10', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'messages', NULL), ('07930b75-3084-4dfd-23e8-e0878e4fc720', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'posts', NULL), ('079318f8-3e83-46ae-c0d7-9b00180b68ff', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'post_reactions', NULL), ('07932f2b-39fa-4b42-4e80-95f47b44f191', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'post_comments', NULL), ('0793ccb0-6e05-474f-5286-6b3dee3ee2b9', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'group_posts', NULL), ('0793902d-3e30-42ac-0bfb-2b7674cf31c8', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'group_post_reactions', NULL), ('079365e1-2046-42a5-fa55-20b07d6537ac', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'group_post_comments', NULL), ('0793253f-8398-495d-c06b-973bc30f10f5', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'group_locations', NULL), ('0793273a-0a65-437c-51cc-28073c52942e', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'group_goals', NULL), ('07932fd8-8b29-4356-a62d-8f03898d7a8c', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_devices', NULL), ('07932b1c-c492-43a3-fc9d-eb5a810b5d11', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'notifications', NULL), ('07933311-94a1-40c0-ee22-ddfc64d612ad', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'notification_preferences', NULL), ('0793bb8a-fa1b-4078-745d-4d4ecbc10db9', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'question_templates', NULL), ('0793288e-0208-4a12-cb1b-f0f6e2c6b5a6', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_questions', NULL), ('0793d89e-acc4-4f53-8dfa-ddcb6725eb12', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'user_answers', NULL), ('0793e2a9-4934-4ab4-ba55-2ec31906678f', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'action_questions', NULL), ('0793a8be-0681-4464-297d-bbf0fe07d6f2', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'onboarding_questions', NULL), ('0793549e-bd50-4d49-3f01-2e37ada722c0', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'rewards', NULL), ('07932b8a-acb4-415f-b232-684ac631ec9f', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'reward_payments', NULL);

INSERT INTO meta_public.domains ( id, database_id, site_id, api_id, domain, subdomain ) VALUES ('34d089ea-f48d-43f8-baa3-9e1ce00bd626', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', NULL, '994cc331-d1f1-41a2-a036-dfea474ed23d', 'dbe.la', 'api'), ('698529f9-ba7d-49bc-ad23-7fdd883c8b92', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', NULL, 'ff39e7d2-0b5c-4e3f-a768-f24d32cc920e', 'dbe.la', 'admin'), ('49315177-fb77-4c43-859c-7eb454cc97ab', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', NULL, '81672fc3-4ddb-4710-9293-5c3855ac6a9a', 'dbe.la', 'meta'), ('5e822424-44fe-466e-a2f1-145623eee871', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'a22f2ca0-4da7-45ff-8a13-63fce0c9ad17', NULL, 'dbe.la', 'app');

INSERT INTO meta_public.apis ( id, database_id, name, dbname, is_public, role_name, anon_role ) VALUES ('994cc331-d1f1-41a2-a036-dfea474ed23d', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'public', 'testing-db-1621658059087', TRUE, 'authenticated', 'anonymous'), ('e2b1e4a7-b697-4c8b-bcba-067ea1a0bbb7', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'private', 'testing-db-1621658059087', FALSE, 'administrator', 'administrator'), ('ff39e7d2-0b5c-4e3f-a768-f24d32cc920e', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'admin', 'testing-db-1621658059087', TRUE, 'administrator', 'administrator'), ('81672fc3-4ddb-4710-9293-5c3855ac6a9a', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'meta', 'testing-db-1621658059087', FALSE, 'administrator', 'administrator'), ('db8d5353-113c-4dc2-adb7-402bd24ea1e8', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'jobs', 'testing-db-1621658059087', FALSE, 'administrator', 'administrator');

INSERT INTO meta_public.sites ( id, database_id, title, description, og_image, favicon, apple_touch_icon, logo, dbname ) VALUES ('a22f2ca0-4da7-45ff-8a13-63fce0c9ad17', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'Dashboard Earth', 'Download our app to get the solutions necessary to balance the climate', '{"url":"https://dl.airtable.com/.attachments/47f723ee5ea33d20e03eb7a82fdd74ea/64497b4d/dbe.png","mime":"image/png"}', 'https://dl.airtable.com/.attachments/9d08e1a8ccfb4e250980e91776707f7e/8057a765/favicon.ico', '{"url":"https://dl.airtable.com/.attachments/1d46c02b389e9902b7b70f50a4bec2e8/602c5ec6/logo-192x192.png","mime":"image/png"}', '{"url":"https://dl.airtable.com/.attachments/47f723ee5ea33d20e03eb7a82fdd74ea/64497b4d/dbe.png","mime":"image/png"}', 'testing-db-1621658059087');

INSERT INTO meta_public.api_modules ( id, database_id, api_id, name, data ) VALUES ('c6dc4cc0-7532-4a11-b180-d8a7e509f7fc', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '994cc331-d1f1-41a2-a036-dfea474ed23d', 'rls_module', '{"role_schema":"dashboard_roles_public","authenticate":"authenticate","current_role":"get_current_user","current_role_id":"get_current_user_id","current_ip_address":"current_ip_address","current_user_agent":"current_user_agent","authenticate_schema":"dashboard_roles_private","authenticate_strict":"authenticate_strict"}');

INSERT INTO meta_public.site_modules ( id, database_id, site_id, name, data ) VALUES ('35530315-b368-4086-9d14-7fc994670178', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'a22f2ca0-4da7-45ff-8a13-63fce0c9ad17', 'legal_terms_module', '{"site":{"www":"app.dbe.la","host":"app.dbe.la","siteUrl":"https://app.dbe.la"},"emails":{"abuse":"info@dashboard.earth","hello":"info@dashboard.earth","legal":"info@dashboard.earth","privacy":"info@dashboard.earth","support":"info@dashboard.earth","copyright":"info@dashboard.earth","arbitrationOptOut":"info@dashboard.earth"},"company":{"addr":["2326 Penmar Ave.","Los Angeles, CA 90291"],"name":"Dashboard Earth, Inc.","nick":"Dashboard Earth","website":"http://dashboard.earth/","legalState":"California","legalCounty":"Los Angeles"}}'), ('ed23b0e9-10ff-438c-a3d3-89126d347723', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'a22f2ca0-4da7-45ff-8a13-63fce0c9ad17', 'user_auth_module', '{"sign_in":"login","sign_up":"register","sign_out":"logout","auth_schema":"dashboard_roles_public","set_password":"set_password","verify_email":"verify_email","check_password":"check_password","reset_password":"reset_password","forgot_password":"forgot_password","verify_password":"verify_password","send_verification_email":"send_verification_email"}');

INSERT INTO meta_public.site_themes ( id, database_id, site_id, theme ) VALUES ('e22cf725-9677-4b94-8714-bedd6539e32c', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'a22f2ca0-4da7-45ff-8a13-63fce0c9ad17', '{"colors":["#9DB4B2","#d3e3e3","#766543","#263130"],"primary":"#466968","background":"#f0f4f4"}');

INSERT INTO meta_public.apps ( id, database_id, site_id, name, app_image, app_store_link, app_store_id, app_id_prefix, play_store_link ) VALUES ('cdb51ce9-9ff1-4c99-afd2-6b0e91ba6e24', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'a22f2ca0-4da7-45ff-8a13-63fce0c9ad17', 'Dashboard Earth', '{"url":"https://dl.airtable.com/.attachments/b5633bad81def88c8d1d93146b1d8da8/f5795056/earth.png","mime":"image/png"}', 'https://itunes.apple.com/us/app/dashboard-earth/id1444355623', '1444355623', NULL, NULL);

INSERT INTO meta_public.api_extensions ( id, database_id, api_id, schema_name ) VALUES ('114dfe1a-b6a1-4fb5-89ad-2865333e7395', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '81672fc3-4ddb-4710-9293-5c3855ac6a9a', 'meta_public'), ('e52d10ab-9042-4e2c-bd3d-5c4f7535be7f', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '81672fc3-4ddb-4710-9293-5c3855ac6a9a', 'collections_public'), ('fa02d14d-97d5-4026-9077-55186a0590f7', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', 'db8d5353-113c-4dc2-adb7-402bd24ea1e8', 'app_jobs');

INSERT INTO meta_public.api_schemata ( id, database_id, schema_id, api_id ) VALUES ('4d3c5d96-8f88-4ddf-aae9-7248ee86e7b3', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', '994cc331-d1f1-41a2-a036-dfea474ed23d'), ('32e694ed-7dc6-4264-9844-f69885108580', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'e2b1e4a7-b697-4c8b-bcba-067ea1a0bbb7'), ('33d157d3-3956-43aa-bdb1-ba6974f91da8', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793b4f3-feae-4fea-ccfb-0262b19e72fa', 'e2b1e4a7-b697-4c8b-bcba-067ea1a0bbb7'), ('b5db89b6-f529-4620-bab3-fa371e4c456f', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '079311ee-04cf-4158-818b-a17769d32de4', 'ff39e7d2-0b5c-4e3f-a768-f24d32cc920e'), ('82d3b7c5-69a7-4921-b312-6388b90936a8', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793b4f3-feae-4fea-ccfb-0262b19e72fa', 'ff39e7d2-0b5c-4e3f-a768-f24d32cc920e'), ('6aaee737-d404-442f-ada9-a246e1c482db', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793bef8-cdb0-4dd4-239d-263f6c1a24d2', '994cc331-d1f1-41a2-a036-dfea474ed23d'), ('3929b80f-f42d-4f1e-9e27-51c6cc2cb513', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793bef8-cdb0-4dd4-239d-263f6c1a24d2', 'e2b1e4a7-b697-4c8b-bcba-067ea1a0bbb7'), ('2862377b-67ed-4eef-9b35-9241292a2f68', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793bef8-cdb0-4dd4-239d-263f6c1a24d2', 'ff39e7d2-0b5c-4e3f-a768-f24d32cc920e'), ('ef802cdb-d636-4ea0-aad4-51a1b96a4677', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07934d87-ba09-4993-b4e3-af9d4bf3dbb8', '994cc331-d1f1-41a2-a036-dfea474ed23d'), ('4ba9c1c1-cfdd-4b02-a1a0-0fcbdd843cfb', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07934d87-ba09-4993-b4e3-af9d4bf3dbb8', 'e2b1e4a7-b697-4c8b-bcba-067ea1a0bbb7'), ('e6d4ba73-9eb9-46c0-bd49-c3ece99d16a7', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07934d87-ba09-4993-b4e3-af9d4bf3dbb8', 'ff39e7d2-0b5c-4e3f-a768-f24d32cc920e'), ('c597079b-6c49-4db9-aa1c-4c1aca0feaad', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', '994cc331-d1f1-41a2-a036-dfea474ed23d'), ('f7482945-b1cf-4b17-ba62-550c1378904b', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'e2b1e4a7-b697-4c8b-bcba-067ea1a0bbb7'), ('b35f3702-4f03-4129-818d-5d2658054f21', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07939258-b12b-444b-abc0-d2c97ef30b2f', 'ff39e7d2-0b5c-4e3f-a768-f24d32cc920e'), ('bb98c614-0e95-4a34-8386-704bc69fafc7', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793a6c9-04ab-4db5-cc9e-2a19a4e98929', '994cc331-d1f1-41a2-a036-dfea474ed23d'), ('ad3d4f57-1ba2-4838-8dcf-7a6db5cb3f5a', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793a6c9-04ab-4db5-cc9e-2a19a4e98929', 'e2b1e4a7-b697-4c8b-bcba-067ea1a0bbb7'), ('ff46f980-5b78-4b9b-9cfe-2e29c4159d03', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '0793a6c9-04ab-4db5-cc9e-2a19a4e98929', 'ff39e7d2-0b5c-4e3f-a768-f24d32cc920e'), ('c50ec21e-9c69-4aa1-a28a-e5101908ad71', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07938ad9-451a-4325-1963-b26cdbfdd4aa', '994cc331-d1f1-41a2-a036-dfea474ed23d'), ('23721a3f-a430-4aa8-b5fb-7d79f9bd6d17', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07938ad9-451a-4325-1963-b26cdbfdd4aa', 'ff39e7d2-0b5c-4e3f-a768-f24d32cc920e'), ('2e7307d5-c8e2-4139-a6dd-19a5a284308e', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07938361-a636-4a12-342d-e8a72f102d1c', '994cc331-d1f1-41a2-a036-dfea474ed23d'), ('d534debb-49eb-411d-b0fa-ba7c5217c9fb', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07938361-a636-4a12-342d-e8a72f102d1c', 'e2b1e4a7-b697-4c8b-bcba-067ea1a0bbb7'), ('23e5ceaa-c4b9-4dfc-a006-24b25b7b11f9', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07938361-a636-4a12-342d-e8a72f102d1c', 'ff39e7d2-0b5c-4e3f-a768-f24d32cc920e');

INSERT INTO meta_public.rls_module ( id, database_id, api_id, schema_id, private_schema_id, tokens_table_id, users_table_id, authenticate, authenticate_strict, "current_role", current_role_id ) VALUES ('e5ee3059-bf05-40a8-8f2b-59ab2016b6f2', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '994cc331-d1f1-41a2-a036-dfea474ed23d', '07938ad9-451a-4325-1963-b26cdbfdd4aa', '0793c751-30bd-4c2e-c688-ca7e191849f1', '07935648-53eb-4785-82ac-928b6b228acc', '0793336c-f2b6-429b-4d8f-336a6d7e6e05', 'authenticate', 'authenticate_strict', 'get_current_user', 'get_current_user_id');

INSERT INTO meta_public.user_auth_module ( id, database_id, schema_id, emails_table_id, users_table_id, secrets_table_id, encrypted_table_id, tokens_table_id, sign_in_function, sign_up_function, sign_out_function, sign_in_one_time_token_function, one_time_token_function, extend_token_expires, send_account_deletion_email_function, delete_account_function, set_password_function, reset_password_function, forgot_password_function, send_verification_email_function, verify_email_function ) VALUES ('05a75b0d-8723-49c6-bf1c-065c4f5eac51', '455a6e2c-3778-55f9-aca2-65ffa9b4a47c', '07938ad9-451a-4325-1963-b26cdbfdd4aa', '079336e9-e40b-45c1-7ce7-96dbee7f966c', '0793336c-f2b6-429b-4d8f-336a6d7e6e05', '07932f76-55c3-4d36-f015-710a116a3d4b', '0793d96a-21a2-4947-4894-d8412b086ebc', '07935648-53eb-4785-82ac-928b6b228acc', 'login', 'register', 'logout', 'login_one_time_token', 'one_time_token', 'extend_token_expires', 'send_account_deletion_email', 'confirm_delete_account', 'set_password', 'reset_password', 'forgot_password', 'send_verification_email', 'verify_email');

UPDATE meta_public.apis
      SET dbname = current_database() WHERE TRUE;

UPDATE meta_public.sites
      SET dbname = current_database() WHERE TRUE;

SET session_replication_role TO DEFAULT;

COMMIT;
